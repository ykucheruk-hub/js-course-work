(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const B="favorites-exercises";function E(){const e=localStorage.getItem(B);return e?JSON.parse(e):[]}function A(e){return E().some(s=>s._id===e)}function D(e){let t=E();const s=t.findIndex(n=>n._id===e._id);return s!==-1?t.splice(s,1):t.push(e),localStorage.setItem(B,JSON.stringify(t)),s===-1}let h=null;function H(){const e=document.getElementById("js-global-notification-close");e&&e.addEventListener("click",S)}function g(e,t="success"){const s=document.getElementById("js-global-notification"),n=document.getElementById("js-global-notification-text");!s||!n||(n.textContent=e,s.className=`global-notification ${t}`,s.classList.remove("is-hidden"),h&&clearTimeout(h),h=setTimeout(S,5e3))}function S(){const e=document.getElementById("js-global-notification");e&&e.classList.add("is-hidden")}function C(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function q(e,t,s){e&&e.classList.add("error"),t&&(t.textContent=s,t.style.display="block")}let T=null,m=0;function P(){const e=document.getElementById("js-rating-modal-form");document.querySelectorAll(".rating-modal__star").forEach((s,n)=>{s.addEventListener("click",()=>{m=n+1,G(m),document.getElementById("js-rating-modal-value").textContent=m.toFixed(1)})}),e==null||e.addEventListener("submit",async s=>{s.preventDefault();const n=document.getElementById("js-rating-modal-email"),r=document.getElementById("js-rating-modal-comment"),i=n.value.trim();if(!C(i)){q(n,null,"Invalid email");return}const o=await R(i,r.value.trim());o.success?(g("Rating submitted!","success"),k()):g(o.error,"error")})}async function R(e,t){try{const s=await fetch(`https://your-energy.b.goit.study/api/exercises/${T}/rating`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:m,email:e,review:t})}),n=await s.json();if(!s.ok)throw new Error(n.message);return{success:!0}}catch(s){return{success:!1,error:s.message}}}function G(e){document.querySelectorAll(".rating-modal__star svg path").forEach((s,n)=>{s.setAttribute("fill",n<e?"#EEA10C":"none")})}function J(e){T=e;const t=document.getElementById("js-rating-modal");t==null||t.classList.remove("is-hidden")}function k(){const e=document.getElementById("js-rating-modal");e==null||e.classList.add("is-hidden"),m=0}let f=null;function U(){const e=document.getElementById("js-exercise-modal");if(!e)return;e.addEventListener("click",n=>{(n.target.classList.contains("js-close-modal")||n.target.closest("#js-exercise-modal-close"))&&_()});const t=document.getElementById("js-exercise-modal-favorites");t==null||t.addEventListener("click",()=>{var i,o;if(!f)return;const n=D(f);$(n);const r=((i=document.querySelector(".js-breadcrumb-current"))==null?void 0:i.style.display)==="none"&&((o=document.querySelector(".exercises__content__header-filters"))==null?void 0:o.style.display)==="none";!n&&r&&F()});const s=document.getElementById("js-exercise-modal-rating-btn");s==null||s.addEventListener("click",()=>{_(),J(f._id)})}async function K(e){const t=document.getElementById("js-exercise-modal");try{f=await(await fetch(`https://your-energy.b.goit.study/api/exercises/${e}`)).json(),Q(f),$(A(e)),t.classList.remove("is-hidden"),document.body.style.overflow="hidden"}catch(s){console.error("Error:",s)}}function Q(e){document.getElementById("js-exercise-modal-image").src=e.gifUrl,document.getElementById("js-exercise-modal-title").textContent=e.name,document.getElementById("js-exercise-modal-description").textContent=e.description,document.getElementById("js-exercise-modal-rating-value").textContent=e.rating.toFixed(1);const t={target:e.target,"body-part":e.bodyPart,equipment:e.equipment,popular:e.popularity,calories:`${e.burnedCalories} / ${e.time} min`};Object.entries(t).forEach(([i,o])=>{const c=document.getElementById(`js-exercise-modal-${i}`);c&&(c.textContent=o)});const n=document.getElementById("js-exercise-modal-stars").querySelectorAll(".exercise-modal__star-icon"),r=Math.round(e.rating);n.forEach((i,o)=>{i.classList.toggle("is-active",o<r)})}function $(e){const t=document.getElementById("js-exercise-modal-favorites"),s=t.querySelector(".js-favorites-text");e?(s.textContent="Remove from favorites",t.classList.add("is-favorite")):(s.textContent="Add to favorites",t.classList.remove("is-favorite"))}function _(){const e=document.getElementById("js-exercise-modal");e&&(e.classList.add("is-hidden"),document.body.style.overflow="")}let x="Muscles",l=null;const d=document.getElementById("js-exercises-container"),y=document.getElementById("js-exercises-pagination"),w=document.getElementById("js-exercises-search");function b(e){w&&(w.style.display=e?"flex":"none")}function L(e=null){const t=document.querySelector(".js-breadcrumb-current"),s=document.querySelector(".js-breadcrumb-divider");e?(t.textContent=e,t.style.display="inline",s.style.display="inline"):(t.style.display="none",s.style.display="none")}function Y(){const e=document.getElementById("js-exercises-search"),t=document.getElementById("js-exercises-search-input");if(!e||!t)return;e.addEventListener("submit",n=>{n.preventDefault();const r=t.value.trim();l&&p(l,1,r)});let s=null;t.addEventListener("input",()=>{s&&clearTimeout(s),s=setTimeout(()=>{const n=t.value.trim();l&&p(l,1,n)},1e3)})}function z(){d&&d.addEventListener("click",e=>{const t=e.target.closest("[data-category-name], [data-exercise-id]");t&&(t.dataset.categoryName?p(t.dataset.categoryName):t.dataset.exerciseId&&K(t.dataset.exerciseId))})}async function v(e,t=1,s=!1){if(x=e,l=null,!s){b(!1),L(null);const n=document.getElementById("js-exercises-search-input");n&&(n.value="")}try{const r=await(await fetch(`https://your-energy.b.goit.study/api/filters?filter=${e}&page=${t}&limit=12`)).json();N(r.results,"category"),M(r.totalPages,t,e,"category")}catch(n){console.error("Error loading cards:",n)}}async function p(e,t=1,s=""){l=e,b(!0),L(e);const n=document.getElementById("js-exercises-search-input"),r=s||(n?n.value.trim():"");let i="muscles";x==="Body parts"&&(i="bodypart"),x==="Equipment"&&(i="equipment");try{let o=`https://your-energy.b.goit.study/api/exercises?${i}=${e.toLowerCase()}&page=${t}&limit=10`;r&&(o+=`&keyword=${encodeURIComponent(r)}`);const a=await(await fetch(o)).json();N(a.results,"exercise"),M(a.totalPages,t,e,"exercise")}catch(o){console.error("Error loading exercises:",o)}}function M(e,t,s,n){if(!y)return;if(e<=1){y.innerHTML="";return}t=Number(t);let r="";const i=1;let o=0;for(let c=1;c<=e;c++)(c===1||c===e||c>=t-i&&c<=t+i)&&(o&&c-o>1&&(r+='<span class="pagination__dots">...</span>'),r+=`
        <button class="exercises__content__main__cards__pagination__btn ${c===t?"is-active":""}" data-page="${c}">
          ${c}
        </button>`,o=c);y.innerHTML=r,y.onclick=c=>{const a=c.target.closest(".exercises__content__main__cards__pagination__btn");if(!a)return;const u=a.dataset.page;n==="category"?v(s,u,!0):p(s,u);const I=document.querySelector(".exercises");I&&window.scrollTo({top:I.offsetTop-20,behavior:"smooth"})}}function N(e,t){if(d){if(e.length===0){d.innerHTML='<p class="exercises__empty">No exercises found.</p>';return}t==="exercise"?d.classList.add("is-exercise-view"):d.classList.remove("is-exercise-view"),d.innerHTML=e.map(s=>t==="category"?W(s):O(s)).join("")}}function W({name:e,filter:t,imgURL:s}){return`
    <div class="exercises__content__main__cards__cards-item" data-category-name="${e}">
      <img src="${s}" alt="${e}" loading="lazy">
      <div class="exercises__content__main__cards__cards-item-overlay">
        <h3>${e}</h3>
        <p>${t}</p>
      </div>
    </div>`}function O(e){return`
    <div class="exercises__content__main__cards__cards-item-exercise" data-exercise-id="${e._id}">
      <div class="exercise-card-top">
        <div class="exercise-card-badge">WORKOUT</div>
        <div class="exercise-card-rating">
          <span>${e.rating.toFixed(1)}</span>
          <svg class="exercise-card-star-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
        <button class="exercise-card-start-btn" type="button">
          Start
          <img src="./images/svg/arrow.svg" width="10" height="10">
        </button>
      </div>

      <div class="exercise-card-title">
        <img src="./images/svg/runner-icon-light.svg" width='18' height='18' class="exercise-card-icon-container">
        <h3 class="exercise-card-name">${e.name}</h3>
      </div>

      <div class="exercise-card-info">
        <p><span>Burned calories:</span> ${e.burnedCalories} / ${e.time} min</p>
        <p><span>Body part:</span> ${e.bodyPart}</p>
        <p><span>Target:</span> ${e.target}</p>
      </div>
    </div>`}function Z(){const e=document.querySelector(".exercises__content__header-filters");e&&(e.style.display="flex"),v("Muscles",1)}function F(){const e=document.getElementById("js-exercises-container"),t=document.getElementById("js-exercises-pagination"),s=document.querySelector(".exercises__content__header-filters");s&&(s.style.display="none"),b(!1),L(null);const n=E();if(n.length===0){e.classList.remove("is-exercise-view"),e.innerHTML=`
      <div class="exercises__empty">
        <p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p>
      </div>`,t&&(t.innerHTML="");return}e.classList.add("is-exercise-view");const r=n.filter(i=>typeof i=="object"&&i.rating!==void 0);e.innerHTML=r.map(i=>O(i)).join(""),t&&(t.innerHTML="")}function V(){const e=document.querySelector(".exercises__filters-group");e&&e.addEventListener("click",t=>{const s=t.target;if(s.classList.contains("exercises__filters-group-item")&&!s.classList.contains("exercises__filters-group-item--active")){e.querySelectorAll(".exercises__filters-group-item").forEach(i=>i.classList.remove("exercises__filters-group-item--active")),s.classList.add("exercises__filters-group-item--active");const r=s.dataset.filter;v(r,1)}})}function X(){const e=document.querySelector(".header__burger"),t=document.querySelector(".mobile-menu__close"),s=document.querySelector(".mobile-menu"),n=document.querySelector(".header__nav"),r=document.querySelector(".mobile-menu__nav"),i=()=>{s==null||s.style.setProperty("display","none"),document.body.style.overflow=""};e==null||e.addEventListener("click",()=>{s==null||s.style.setProperty("display","block"),document.body.style.overflow="hidden"}),t==null||t.addEventListener("click",i);const o=c=>{const a=c.target.closest("[data-page]");if(!a)return;c.preventDefault();const u=a.dataset.page;ee(u),u==="favorites"?F():Z(),i()};n==null||n.addEventListener("click",o),r==null||r.addEventListener("click",o)}function ee(e){document.querySelectorAll(".header__nav-link, .mobile-menu__link").forEach(s=>{s.classList.toggle("header__nav-link--active",s.dataset.page===e)})}const j="quote-data";async function te(){const e=document.getElementById("js-exercises-quote-text"),t=document.getElementById("js-exercises-quote-author");if(!e||!t)return;const s=await se();s&&(e.textContent=s.quote,t.textContent=s.author)}async function se(){const e=JSON.parse(localStorage.getItem(j)),t=new Date().toDateString();if(e&&e.date===t)return e;try{const r={...await(await fetch("https://your-energy.b.goit.study/api/quote")).json(),date:t};return localStorage.setItem(j,JSON.stringify(r)),r}catch(s){return console.error("Error fetching quote:",s),e}}document.addEventListener("DOMContentLoaded",()=>{X(),te(),H(),U(),P(),Y(),z(),V(),v("Muscles",1);const e=document.getElementById("js-subscribe-form"),t=document.getElementById("subscribeEmail"),s=document.getElementById("js-subscribe-error");e&&e.addEventListener("submit",async n=>{n.preventDefault();const r=t.value.trim();if(!C(r)){q(t,s,"Please enter a valid email address");return}const i=await ne(r);i.success?(g("Thank you for subscribing!","success"),e.reset()):g(i.error,"error")}),window.addEventListener("keydown",n=>{n.key==="Escape"&&(_(),k())})});async function ne(e){try{const t=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await t.json();if(!t.ok)throw new Error(s.message||"Subscription failed");return{success:!0}}catch(t){return{success:!1,error:t.message}}}
//# sourceMappingURL=index.js.map
